.TH PTY-WRAP 1 "December 2025" "pty-wrap 0.1.0" "User Commands"
.SH NAME
pty-wrap \- run interactive programs with simple command-based I/O
.SH SYNOPSIS
.B pty-wrap start
.RB [ \-\- ]
.I COMMAND
.RI [ ARGS... ]
.br
.B pty-wrap read
.I SESSION
.br
.B pty-wrap send
.I SESSION
.I INPUT
.br
.B pty-wrap status
.I SESSION
.br
.B pty-wrap stop
.I SESSION
.br
.B pty-wrap list
.SH DESCRIPTION
.B pty-wrap
runs interactive programs inside a pseudo-terminal (PTY) and provides
simple subcommands for reading output and sending input. This allows
automation of programs that expect terminal interaction.
.SH SUBCOMMANDS
.TP
.BI "start [--] " "COMMAND [ARGS...]"
Start a new session running COMMAND. Prints the session ID.
Use \-\- before COMMAND if it has flags.
.TP
.BI "read " SESSION
Read all output from the session. Never blocks. Can be called multiple
times; output accumulates.
.TP
.BI "send " "SESSION INPUT"
Send INPUT to the session (newline added automatically). Includes safety
checks: verifies process is running and uses timeout to prevent blocking.
Prints "ok" on success.
.TP
.BI "status " SESSION
Check session status. Prints "running", "exited", or "not_found".
.TP
.BI "stop " SESSION
Stop the session (kills process if running) and clean up files.
Prints "stopped".
.TP
.B list
List all sessions with their status and command.
.SH EXAMPLES
.PP
Start an interactive Python script and interact with it:
.PP
.RS
.nf
# Start the program
$ pty-wrap start -- python3 quiz.py
session: abc12345

# Read what it printed
$ pty-wrap read abc12345
What is 42 doubled?

# Send answer
$ pty-wrap send abc12345 "84"
ok

# Read response
$ pty-wrap read abc12345
What is 42 doubled?
84
Correct!

[pty-wrap: process exited]

# Check status
$ pty-wrap status abc12345
exited

# Clean up
$ pty-wrap stop abc12345
stopped
.fi
.RE
.SH FILES
Sessions are stored in
.I /tmp/pty-wrap-sessions/<session-id>/
with the following files:
.TP
.I output.txt
Accumulated program output.
.TP
.I input.fifo
Named pipe for sending input (managed by send subcommand).
.TP
.I pid
Process ID of the pty-wrap daemon.
.TP
.I cmd
The command being run.
.SH EXIT STATUS
.TP
.B 0
Success
.TP
.B 1
Error (session not found, process not running, timeout, etc.)
.SH SEE ALSO
.BR pty (7),
.BR expect (1)
.SH AUTHOR
David Jacka
